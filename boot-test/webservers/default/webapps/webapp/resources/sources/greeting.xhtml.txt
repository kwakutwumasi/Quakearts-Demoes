<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:c="http://quakearts.com/2.0/common"
	  xmlns:b="http://quakearts.com/2.0/boot"
	  xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
	<meta charset="ISO-8859-1" />
	<title>The Greeting App</title>
</h:head>
<h:body>
	<b:ajaxLoader mainloaderimage="../resources/images/loading-squares.gif"
		miniloaderimage="../resources/images/login-loading.GIF"
		overlayloaderimage="../resources/images/loading-small.svg"
		startTimeout="1" />
	<b:sideMenu styleClass="hidden-xs">
		<b:nav style="margin-top: 60px">
			<h:outputLink value="https://google.com">
				<b:fa value="google"></b:fa>Google
			</h:outputLink>
			<h:outputLink value="https://github.com/kwakutwumasi">
				<b:fa value="github"></b:fa>Git Hub
			</h:outputLink>
			<b:menu value="Others">
				<h:outputLink value="https://yahoo.com">
					<b:fa value="yahoo"></b:fa>Yahoo
				</h:outputLink>			
			</b:menu>
		</b:nav>
	</b:sideMenu>
	<b:panel popup="true">
		<f:facet name="header">Welcome</f:facet>
		This app is a demo of the QA-Boot Library, an implementation of Bootstrap 3 for JSF 2.2
		To view the JSF source code go to <a href="/resources/sources/greeting.xhtml.txt">greeting.xhtml</a>
	</b:panel>
	<b:container fluid="true" id="container">
		<b:navbar fluid="true" responsive="true" type="inverse" position="fixed-top">
			<f:facet name="header"></f:facet>
			<b:nav>
				<h:outputLink value="https://gmail.com">
					<b:glyph value="send"></b:glyph> GMail
				</h:outputLink>
				<h:outputLink value="https://instagram.com">
					<b:fa value="instagram"></b:fa> Instagram
				</h:outputLink>
				<b:menu value="Others">
					<h:outputLink value="https://facebook.com">
						<b:fa value="facebook"></b:fa> Facebook 
					</h:outputLink>			
				</b:menu>
			</b:nav>
			<b:form>
				<b:formGroup>
					<b:button actionListener="#{greeting.reset}">
						<b:glyph value="refresh"></b:glyph>
					</b:button>
				</b:formGroup>
			</b:form>
		</b:navbar>
		<b:row style="margin-top:80px;" id="mainComp">
			<h:form>
				<b:column xs="10" lg="2" offsetlg="1">
					<b:label value="Nav pills stacked" type="default"></b:label>
					<br />
					<b:nav type="pills" stacked="true">
						<h:commandLink p:data-overlay-target="#{panelsComp.clientId}">
							<f:ajax onevent="#{loader.overlayAjaxLoader}" 
								onerror="refresh"
								render="panels messages"></f:ajax>
								Home
							<f:setPropertyActionListener value="#{null}" 
								target="#{greeting.state}">
							</f:setPropertyActionListener>
						</h:commandLink>
						<h:commandLink p:data-overlay-target="#{panelsComp.clientId}">
							<f:ajax onevent="#{loader.overlayAjaxLoader}" 
								onerror="refresh"
								render="panels messages"></f:ajax>
								Settings
							<f:setPropertyActionListener value="setting" 
								target="#{greeting.state}">
							</f:setPropertyActionListener>
						</h:commandLink>
						<h:commandLink p:data-overlay-target="#{panelsComp.clientId}">
							<f:ajax onevent="#{loader.overlayAjaxLoader}" 
								onerror="refresh"
								render="panels messages"></f:ajax>
								Language Upload
							<f:setPropertyActionListener value="languageUpload" 
								target="#{greeting.state}">
							</f:setPropertyActionListener>
						</h:commandLink>
						<h:commandLink p:data-overlay-target="#{panelsComp.clientId}">
							<f:ajax onevent="#{loader.overlayAjaxLoader}" 
								onerror="refresh"
								render="panels messages"></f:ajax>
								Search
							<f:setPropertyActionListener value="search" 
								target="#{greeting.state}">
							</f:setPropertyActionListener>
						</h:commandLink>
					</b:nav>
				</b:column>
				<b:column xs="10" lg="3" id="panels" binding="#{panelsComp}">
					<b:messages showDetail="true" id="messages" dismissible="true"></b:messages>
					<div>
						<b:label value="Boot Breadcrumbs:" type="success"></b:label><br />
						<b:breadCrumb style="font-size:8px;" id="breadCrumbsComp">
							<b:breadCrumbItem activate="#{empty greeting.state}">
								<h:commandLink value="Home">
									<f:setPropertyActionListener target="#{greeting.state}"
												value="#{null}"></f:setPropertyActionListener>
									<f:ajax onerror="refresh" onevent="#{loader.mainAjaxLoader}"></f:ajax>
								</h:commandLink>
								<b:breadCrumbItem activate="#{greeting.state eq 'setting'}">
									Settings
								</b:breadCrumbItem>
								<b:breadCrumbItem activate="#{greeting.state eq 'languageUpload'}">
									Language Upload
								</b:breadCrumbItem>
								<b:breadCrumbItem activate="#{greeting.state eq 'search'}">
									Search
								</b:breadCrumbItem>
							</b:breadCrumbItem>
						</b:breadCrumb>
					</div>
					<b:label value="Boot Panel:" type="info"></b:label><br />
					<h:panelGroup rendered="#{empty greeting.state}">
						<b:panel id="greetingComp" binding="#{greetingComp}">
							<h:outputText styleClass="h1" value="#{greeting.value}"></h:outputText>
						</b:panel>
						<b:panel id="greetingForm">
							<f:facet name="header">
								Greeting Settings
							</f:facet>
							<b:label value="Boot Form:" type="warning"></b:label><br />
							<b:formGroup>
								<label>Name</label>
								<b:inputText value="#{greeting.name}" id="name">
									<f:facet name="label">
										<b:fa value="user-o"></b:fa>
									</f:facet>
								</b:inputText>
							</b:formGroup>
							<b:formGroup>
								<label>Presents</label>
								<div>
									<b:buttonGroup>
										<b:button>
											<b:glyph value="backward"></b:glyph>
											<f:ajax listener="#{greeting.decrement}" 
												onerror="refresh"
												onevent="#{loader.miniAjaxLoader}"
												render="presentsComp messages"></f:ajax>
										</b:button>
										<b:button disabled="true" id="presentsComp">
											<b:fa value="birthday-cake"></b:fa>
											#{greeting.numberOfPresents}
										</b:button>
										<b:button>
											<b:glyph value="forward"></b:glyph>
											<f:ajax listener="#{greeting.increment}"
												onerror="refresh"
											 	onevent="#{loader.miniAjaxLoader}" 
												render="presentsComp messages"></f:ajax>
										</b:button>
									</b:buttonGroup>
								</div>
							</b:formGroup>
							<b:formGroup>
								<label>Birth Date</label>
								<b:date value="#{greeting.birthDate}" min="10" id="birthdate">
									<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
								</b:date>
							</b:formGroup>
							<b:formGroup>
								<b:button data-overlay-target="#{greetingComp.clientId}">
									<b:glyph value="upload"></b:glyph>
									<f:ajax listener="#{greeting.updateGreeting}" 
										onerror="refresh"
										onevent="#{loader.overlayAjaxLoader}"
										render="greetingComp messages" 
										execute="@this name birthdate"></f:ajax>
								</b:button>
							</b:formGroup>
						</b:panel>
					</h:panelGroup>
					<b:panel rendered="#{greeting.state eq 'setting'}">
						<f:facet name="header">
							Advanced Settings
						</f:facet>
						<b:formGroup>
							<label>Language</label>
							<b:selectOneInputGroup value="#{greeting.language}"
								id="greetingLanguage">
								<f:facet name="label">
									<b:glyph value="globe"></b:glyph>
								</f:facet>
								<f:selectItems value="#{greeting.languages}"
									itemLabel="#{langGroup[0]}"
									itemValue="#{langGroup[1]}"
									var="langGroup">
								</f:selectItems>
							</b:selectOneInputGroup>
						</b:formGroup>
						<b:formGroup>
							<label>Greeting Type</label>
							<b:selectOneInput value="#{greeting.greetingType}" 
								id="greetingType">
								<f:selectItems value="#{greeting.greetingTypes}">
								</f:selectItems>
							</b:selectOneInput>
						</b:formGroup>
						<b:formGroup>
							<b:button data-overlay-target="#{breadCrumbsComp.clientId}">
								<b:flaticon value="settings"></b:flaticon>
								<f:ajax listener="#{greeting.updateLanguage}" 
									onevent="#{loader.miniAjaxLoader}"
									onerror="refresh"
									execute="@this greetingType greetingLanguage"
									render="messages"></f:ajax>
							</b:button>
						</b:formGroup>
						<b:formGroup>
							<label>Theme</label>
							<b:selectOneListbox value="#{greeting.theme}" mainClass="fill100">
								<f:selectItems value="#{greeting.availableThemes}">
								</f:selectItems>
							</b:selectOneListbox>
						</b:formGroup>
						<b:formGroup>
							<b:button displayType="primary">
								<c:executeAction listener="#{greeting.changeTheme}">
								</c:executeAction>
								<b:glyph value="refresh"></b:glyph>
							</b:button>
						</b:formGroup>
						<b:formGroup>
							<label>Background Images</label>
							<b:selectManyListbox mainClass="#{loader.overlayClass} fill100"
								value="#{greeting.filterImages}" 
								data-overlay-target="#{carouselColumnComp.clientId}">
								<f:selectItems value="#{greeting.images}">
								</f:selectItems>
								<f:ajax onevent="#{loader.overlayAjaxLoader}"
									onerror="refresh" 
									render="carouselColumn">
								</f:ajax>
							</b:selectManyListbox>
						</b:formGroup>
						<b:formGroup>
							<b:button actionListener="#{greeting.reset}">
								<b:glyph value="refresh"></b:glyph>
							</b:button>
						</b:formGroup>
					</b:panel>
					<b:panel rendered="#{greeting.state eq 'languageUpload'}">
						<f:facet name="header">
							Upload Language Tags
						</f:facet>
						<b:formGroup>
							<label>Available Language Tags</label>
							<b:selectOneMenu value="#{greeting.selectedLanguageTag}">
								<f:selectItems value="#{greeting.languages}"
									itemLabel="#{langGroup[0]}"
									itemValue="#{langGroup[1]}"
									var="langGroup">
								</f:selectItems>
							</b:selectOneMenu>
						</b:formGroup>
						<label>Upload File</label>
						<b:fileinput accept=".properties"
							render="messages" onerror="refresh"
							name="#{greeting.messageBundleFileName}"
							data="#{greeting.messageBundleBytes}">
							<c:executeAction listener="#{greeting.addGreetingBundle}">
							</c:executeAction>
						</b:fileinput>
					</b:panel>
					<b:panel rendered="#{greeting.state eq 'search'}">
						<f:facet name="header">
							Search Action Logs
						</f:facet>
						<b:label value="Boot Datatable:" type="danger"></b:label><br />
						<b:pagination data-overlay-target="#{table.clientId}" 
							for="#{table}" maxPages="3" pageSize="10">
						</b:pagination>
						<b:dataTable binding="#{table}" id="table" var="actionLog" value="#{greeting.actionLogs}">
							<h:column>
								<f:facet name="header">
									Date
								</f:facet>
								<h:outputText value="#{actionLog.actionDate}">
									<f:convertDateTime pattern="ddd MMM yyyy HH:mm">
									</f:convertDateTime>
								</h:outputText>
							</h:column>
							<h:column>
								<f:facet name="header">
									Action
								</f:facet>
								<h:outputText value="#{actionLog.action}"></h:outputText>
							</h:column>
							<h:column>
								<f:facet name="header">
									Host
								</f:facet>
								<h:outputText value="#{actionLog.actionHost}"></h:outputText>
							</h:column>
						</b:dataTable>
						<b:formGroup>
							<label>Action Filter</label>
							<b:selectManyMenu id="actions" label="Select filter to use"
								mainClass="fill100" buttonClass="btn-block"
								value="#{greeting.filterSelectedActions}">
								<f:selectItems value="#{greeting.actions}">
								</f:selectItems>
							</b:selectManyMenu>
						</b:formGroup>
						<b:formGroup>
							<b:button data-overlay-target="#{table.clientId}">
								<b:glyph value="search"></b:glyph>
								<f:ajax listener="#{greeting.searchActionsWithFilter}"
									onevent="#{loader.overlayAjaxLoader}" onerror="refresh"
									render="table messages" execute="@this actions">
								</f:ajax>
							</b:button>
						</b:formGroup>
					</b:panel>
				</b:column>
				<b:column id="carouselColumn" xs="12" lg="3"
					binding="#{carouselColumnComp}">
					<b:label value="images" type="primary"></b:label>
					<div id="myCarousel" class="carousel slide" data-ride="carousel">
						<!-- Indicators -->
						<ol class="carousel-indicators">
							<ui:repeat var="image" value="#{greeting.filterImages}" varStatus="status">
								<li data-target="#myCarousel" 
									data-slide-to="#{status.step}" 
									class="#{status.first?'active':''}">
								</li>
							</ui:repeat>
						</ol>

						<!-- Wrapper for slides -->
						<div class="carousel-inner">
							<ui:repeat var="image" value="#{greeting.filterImages}" varStatus="status">
								<div class="item #{status.first?'active':''}">
									<img src="/resources/images/#{image}" alt="#{image}" class="img-rounded" />
								</div>
							</ui:repeat>
						</div>

						<!-- Left and right controls -->
						<a class="left carousel-control" href="#myCarousel"
							data-slide="prev">
							<span class="glyphicon glyphicon-chevron-left"></span>
							<span class="sr-only"></span>
						</a>
						<a class="right carousel-control" href="#myCarousel"
							data-slide="next"> 
							<span class="glyphicon glyphicon-chevron-right"></span> 
							<span class="sr-only"></span>
						</a>
					</div>
				</b:column>
			</h:form>
		</b:row>
	</b:container>
	<b:script id="script">
		var refresh = function(){
			location.reload();
		};
	</b:script>
</h:body>
</html>